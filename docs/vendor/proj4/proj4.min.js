(function(global){
  if (global.proj4) { return; }

  var shpInstance = global.shp;
  var shpProj4 = shpInstance && shpInstance.proj4;

  if (typeof shpProj4 === 'function') {
    global.proj4 = shpProj4;
    return;
  }

  console.error('[Proj4 Loader] Não foi possível inicializar Proj4 localmente.');
})(typeof globalThis !== 'undefined' ? globalThis : window);
